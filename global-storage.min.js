!function(root){"use strict";var data={},_get,_set,extend,isObject,storage;extend=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},_get=function(a,b){var c,d=null;void 0===b&&(b=data);for(c in b)if(b.hasOwnProperty(c)&&a[0]==c){if(a.length<=1){d=b[c];break}if(b=b[c],null===b||void 0===b){d=null;break}-1!==a.indexOf(c)&&a.splice(a.indexOf(c),1),d=1==a.length?isObject(b)&&b.hasOwnProperty(a)&&void 0!==b[a]?b[a]:null:isObject(b)?_get(a,b):null;break}return d},_set=function(key,value){var subdata={},i,len;for(key=key.reverse(),len=key.length,i=0;len>i;i++)0===i?subdata[key[0]]=value:(subdata[key[i]]=extend({},subdata),delete subdata[key[i-1]]);extend(data,subdata),value&&eval('data["'+key.reverse().join('"]["')+'"] = value;')},storage={get:function(a,b){var c=_get(a.split("."));return null!==c?c:void 0===b?null:b},set:function(a,b){return _set(a.split("."),b),this},fromJSON:function(a){return extend(data,JSON.parse(a)||{}),this}},"function"==typeof define&&define.amd?define(function(){root.GlobalStorage=storage}):root.GlobalStorage=storage}(this);